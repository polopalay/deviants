deviants_prostitute_interaction = {
	icon = deviantshealth
	desc = deviants_prostitute_interaction.desc
    	category = interaction_category_diplomacy
    	use_diplomatic_range = yes
	if = {
		limit = { has_character_modifier = deviants_prostitute }
		cooldown_against_recipient = { months = 12 }
	}
	else = {
		cooldown_against_recipient = { months = 1 }
	}
	cooldown = { months = 6 }

    	is_shown = {
		NOT = { scope:recipient = scope:actor }
        	scope:actor = {
            		is_adult = yes
            		is_incapable = no
            		is_imprisoned = no
			is_travelling = no
			is_attracted_to_gender_of = scope:recipient
			NOT = { 
				is_spouse_of = scope:recipient
				has_trait = lovers_pox
			}
			NOR = {
				has_character_modifier = deviants_public_toilet
				has_character_modifier = deviants_prostitute
			}
        	}
        	scope:recipient = {
            		is_adult = yes
            		is_incapable = no
            		is_imprisoned = no
			is_travelling = no
			NOT = { is_spouse_of = root }
			OR = {
				has_character_modifier = deviants_public_toilet
				has_character_modifier = deviants_prostitute
			}
        	}
    	}

    	on_accept = {
		scope:recipient = {
			save_scope_as = seller
			add_character_modifier = {
				modifier = deviants_fuckedsilly
				months = 1
			}
			had_sex_with_effect = {
				CHARACTER = scope:actor
				PREGNANCY_CHANCE = 0
            		}
		}
        	scope:actor = {
			save_scope_as = buyer
			if = {
				limit = { 
					scope:recipient = { has_character_modifier = deviants_prostitute }
				}
				if = {
					limit = {
						exists = scope:recipient.liege
					}
					pay_short_term_gold = {
						target = scope:recipient.liege
						gold = 2
					}
					pay_short_term_gold = {
						target = scope:recipient
						gold = 2
					}
				}
				else = {
					pay_short_term_gold = {
						target = scope:recipient
						gold = 4
					}
				}
			}
			trigger_event = deviants_prostitution_events.1 
    		}
		if = {
			limit = { scope:recipient = { has_trait = deviants_succubus } }
			scope:recipient = {
				add_trait_xp = {
					trait = deviants_succubus
					track = power
					value = 1
				}
			}
		}
		if = {
			limit = { scope:recipient.liege = { has_trait = deviants_succubus } }
			scope:recipient.liege = {
				add_trait_xp = {
					trait = deviants_succubus
					track = corruption
					value = 1
				}
			}
		}
		if = {
			limit = { scope:recipient = { has_trait = deviants_lesser_succubus } }
				scope:recipient = {
					add_trait_xp = {
						trait = deviants_lesser_succubus
						value = 1
					}
				}
    		}
	}

	ignores_pending_interaction_block = yes
	ai_frequency = 6
	ai_targets = {
		ai_recipients = liege
		ai_recipients = courtiers
		ai_recipients = vassals
		ai_recipients = peer_vassals
		ai_recipients = neighboring_rulers
		ai_recipients = sub_realm_characters
		ai_recipients = realm_characters
	}
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 10
		modifier = {
			add = 15
			scope:actor = {
				gold > 100
			}
		}
		modifier = {
			add = 40
			scope:actor = {
				has_trait = lustful
			}
		}
		modifier = {
			add = -40
			OR = {
				scope:actor.dynasty = scope:recipient.dynasty
				is_close_or_extended_family_of = scope:actor
				is_close_family_of = scope:actor
			}
		}
	}
}

deviants_become_prostitute_interaction = {
	icon = deviantshealth
	desc = deviants_become_prostitute_interaction.desc
    	category = interaction_category_diplomacy
    	use_diplomatic_range = yes
	cooldown = { months = 12 }

    	is_shown = {
        	scope:actor = {
            		is_adult = yes
			is_landed = yes
			has_trait = deviants_succubus
        	}
        	scope:recipient = {
            		is_adult = yes
			is_female = yes
			NOR = {
				has_character_modifier = deviants_public_toilet
				has_character_modifier = deviants_prostitute
			}
			OR = {
				scope:actor = scope:recipient
				is_vassal_of = scope:actor
				is_courtier_of = scope:actor
				AND = {
					is_ruler = no
					is_imprisoned_by = scope:actor
				}
			}
        	}
    	}

    	on_accept = {
		scope:recipient = {
			add_character_modifier = deviants_prostitute
			add_character_flag = blocked_from_leaving
			if = {
				limit = { is_imprisoned_by = scope:actor }
				release_from_prison = yes
			}
			if = {
				limit = {
					scope:recipient = {
						is_spouse_of = scope:actor
						exposed_cheating_on_spouse_trigger = { SPOUSE = scope:actor }
					}
					every_spouse = {
						divorce = scope:recipient
					}
				}
			}
		}
		scope:actor = {
			if = {
				limit = { 
					NOT = { is_liege_or_above_of = scope:recipient } 
					NOT = { scope:recipient = scope:actor }
				}
				add_courtier = scope:recipient
			}
			if = {
				limit = {
					scope:hook = yes
					has_hook = scope:recipient
				}
				use_hook = scope:recipient
			}
		}
    	}

	auto_accept = {
		OR = {
			scope:recipient = { is_imprisoned_by = scope:actor }
			scope:recipient = scope:actor
			custom_description = {
				text = "spending_hook"
				subject = scope:actor
				object = scope:recipient
				scope:hook = yes
			}
		}
	}

	send_option = {
		is_valid = {
			scope:actor = {
				has_usable_hook = scope:recipient
			}
		}
		flag = hook	
		localization = GENERIC_SPEND_A_HOOK
	}
	send_options_exclusive = no

	ai_accept = {
		base = -50
		modifier = {
			add = 100
			scope:recipient = { has_trait = deviants_lesser_succubus }
		}
		opinion_modifier = {
			opinion_target = scope:actor
			who = scope:recipient
			multiplier = 1
		}
	}

	ai_frequency = 12
	ai_targets = {
		ai_recipients = courtiers
		ai_recipients = vassals
		ai_recipients = self
		ai_recipients = prisoners
	}
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 5
		modifier = {
			add = 100
			scope:recipient = {
				has_trait = deviants_lesser_succubus
			}
		}
		modifier = {
			add = 100
			scope:actor = scope:recipient
			scope:actor = {
				has_trait = deviants_succubus
			}
		}
		modifier = {
			add = -50
			is_close_family_of = scope:actor
			OR = {
				scope:actor.dynasty = scope:recipient.dynasty
				is_close_or_extended_family_of = scope:actor
				is_close_family_of = scope:actor
			}
		}
		modifier = {
			add = 50
			scope:actor = {
				OR = {
					has_relation_rival = scope:recipient
					has_relation_nemesis = scope:recipient
					scope:recipient = {
						is_spouse_of = scope:actor
						exposed_cheating_on_spouse_trigger = { SPOUSE = scope:actor }
					}
				}
			}
		}
	}
}

deviants_stop_prostitute_interaction = {
	icon = deviantsfertility
	desc = deviants_stop_prostitute_interaction.desc
    	category = interaction_category_diplomacy
    	use_diplomatic_range = yes
	cooldown = { months = 12 }

    	is_shown = {
        	scope:actor = {
            		is_adult = yes
			is_landed = yes
			has_trait = deviants_succubus
        	}
        	scope:recipient = {
            		is_adult = yes
			is_female = yes
			has_character_modifier = deviants_prostitute
			OR = {
				scope:actor = scope:recipient
				is_courtier_of = scope:actor
			}
        	}
    	}


    	on_accept = {
		scope:recipient = {
			remove_character_modifier = deviants_prostitute
		}
    	}

	auto_accept = yes

	ai_frequency = 12
	ai_targets = {
		ai_recipients = courtiers
		ai_recipients = vassals
		ai_recipients = self
		ai_recipients = prisoners
	}
	ai_potential = { always = yes }

	ai_will_do = {
		base = 0
		modifier = {
			add = -100
			scope:recipient = {
				has_trait = deviants_lesser_succubus
			}
		}
		modifier = {
			add = -100
			scope:actor = scope:recipient
			scope:actor = {
				has_trait = deviants_succubus
			}
		}
		modifier = {
			add = 50
			is_close_family_of = scope:actor
			OR = {
				scope:actor.dynasty = scope:recipient.dynasty
				is_close_or_extended_family_of = scope:actor
				is_close_family_of = scope:actor
			}
		}
		modifier = {
			add = -50
			scope:actor = {
				OR = {
					has_relation_rival = scope:recipient
					has_relation_nemesis = scope:recipient
					scope:recipient = {
						is_spouse_of = scope:actor
						exposed_cheating_on_spouse_trigger = { SPOUSE = scope:actor }
					}
				}
			}
		}
	}
}

deviants_become_public_toilet_interaction = {
	icon = deviantsexcrement
	desc = deviants_become_public_toilet_interaction.desc
    	category = interaction_category_diplomacy
    	use_diplomatic_range = yes
	cooldown = { months = 12 }

    	is_shown = {
        	scope:actor = {
            		is_adult = yes
			is_landed = yes
			has_trait = deviants_succubus
        	}
        	scope:recipient = {
            		is_adult = yes
			is_female = yes
			OR = {
				scope:actor = scope:recipient
				is_vassal_of = scope:actor
				is_courtier_of = scope:actor
				AND = {
					is_ruler = no
					is_landed = no
					is_imprisoned_by = scope:actor
				}
			}
			has_character_modifier = deviants_prostitute
			NOT = { has_character_modifier = deviants_public_toilet }
        	}
    	}

	send_option = {
		is_valid = {
			scope:actor = {
				has_usable_hook = scope:recipient
			}
		}
		flag = hook	
		localization = GENERIC_SPEND_A_HOOK
	}
	send_options_exclusive = no

	auto_accept = {
		OR = { 
			scope:recipient = {
				is_imprisoned_by = scope:actor
			}

			custom_description = {
				text = "spending_hook"
				subject = scope:actor
				object = scope:recipient
				scope:hook = yes
			}
		}
	}
    	on_accept = {
		scope:recipient = {
			remove_character_modifier = deviants_prostitute
			add_character_modifier = deviants_public_toilet
			add_character_flag = blocked_from_leaving
			if = {
				limit = { is_imprisoned_by = scope:actor }
				release_from_prison = yes
			}
			if = {
				limit = {
					scope:recipient = {
						is_spouse_of = scope:actor
						exposed_cheating_on_spouse_trigger = { SPOUSE = scope:actor }
					}
					every_spouse = {
						divorce = scope:recipient
					}
				}
			}
		}
		scope:actor = {
			if = {
				limit = { 
					NOT = { is_liege_or_above_of = scope:recipient } 
					NOT = { scope:recipient = scope:actor }
				}
				add_courtier = scope:recipient
			}
		}
    	}

	ai_accept = {
		base = -80
		opinion_modifier = {
			opinion_target = scope:actor
			who = scope:recipient
			multiplier = 1
		}
	}

	ai_frequency = 12
	ai_targets = {
		ai_recipients = courtiers
		ai_recipients = vassals
		ai_recipients = self
		ai_recipients = prisoners
	}
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 5
		modifier = {
			add = -50
			is_close_family_of = scope:actor
			OR = {
				scope:actor.dynasty = scope:recipient.dynasty
				is_close_or_extended_family_of = scope:actor
				is_close_family_of = scope:actor
			}
		}
		modifier = {
			add = 50
			scope:actor = {
				OR = {
					has_relation_rival = scope:recipient
					has_relation_nemesis = scope:recipient
					scope:recipient = {
						is_spouse_of = scope:actor
						exposed_cheating_on_spouse_trigger = { SPOUSE = scope:actor }
					}
				}
			}
		}
	}
}

deviants_stop_public_toilet_interaction = {
	icon = deviantslove
	desc = deviants_stop_public_toilet_interaction.desc
    	category = interaction_category_diplomacy
    	use_diplomatic_range = yes
	cooldown = { months = 12 }

    	is_shown = {
        	scope:actor = {
            		is_adult = yes
			is_landed = yes
			has_trait = deviants_succubus
        	}
        	scope:recipient = {
            		is_adult = yes
			is_female = yes
			OR = {
				scope:actor = scope:recipient
				is_courtier_of = scope:actor
			}
			has_character_modifier = deviants_public_toilet
        	}
    	}

	auto_accept = yes

    	on_accept = {
		scope:recipient = {
			add_character_modifier = deviants_prostitute
			remove_character_modifier = deviants_public_toilet
		}
    	}

	ai_frequency = 12
	ai_targets = {
		ai_recipients = courtiers
		ai_recipients = vassals
		ai_recipients = self
		ai_recipients = prisoners
	}
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 0
		modifier = {
			add = 50
			scope:actor = scope:recipient
		}
		modifier = {
			add = 50
			is_close_family_of = scope:actor
			OR = {
				scope:actor.dynasty = scope:recipient.dynasty
				is_close_or_extended_family_of = scope:actor
				is_close_family_of = scope:actor
			}
		}
		modifier = {
			add = -50
			scope:actor = {
				OR = {
					has_relation_rival = scope:recipient
					has_relation_nemesis = scope:recipient
					scope:recipient = {
						is_spouse_of = scope:actor
						exposed_cheating_on_spouse_trigger = { SPOUSE = scope:actor }
					}
				}
			}
		}
	}
}

deviants_trade_slut_interaction = {
	icon = deviantsdiplomacy
	desc = deviants_trade_slut_interaction.desc
    	category = interaction_category_diplomacy
    	use_diplomatic_range = yes

    	is_shown = {
		NOT = { scope:actor = scope:recipient }
        	scope:actor = {
            		is_adult = yes
			OR = {
				is_landed = yes
				is_ruler = yes
			}
			has_trait = deviants_succubus
			any_courtier = {
				OR = {
					has_character_modifier = deviants_prostitute
					has_character_modifier = deviants_public_toilet
				}
			}
        	}
        	scope:recipient = {
            		is_adult = yes
			OR = {
				is_landed = yes
				is_ruler = yes
			}
			has_trait = deviants_succubus
			any_courtier = {
				OR = {
					has_character_modifier = deviants_prostitute
					has_character_modifier = deviants_public_toilet
				}
			}
        	}
    	}

	populate_actor_list = {
		scope:actor = {
			every_courtier = {
				limit = {
					OR = {
						has_character_modifier = deviants_prostitute
						has_character_modifier = deviants_public_toilet
					}
				}
				add_to_list = characters
			}
		}
	}
	populate_recipient_list = {
		scope:recipient = {
			every_courtier = {
				limit = {
					OR = {
						has_character_modifier = deviants_prostitute
						has_character_modifier = deviants_public_toilet
					}
				}
				add_to_list = characters
			}
		}
	}

	send_option = {
		is_valid = {
			scope:actor = {
				has_usable_hook = scope:recipient
			}
		}
		flag = hook	
		localization = GENERIC_SPEND_A_HOOK
	}
	send_options_exclusive = no
	auto_accept = {
		custom_description = {
			text = "spending_hook"
			subject = scope:actor
			object = scope:recipient
			scope:hook = yes
		}
	}	

    	on_accept = {
		scope:recipient = {
			add_courtier = scope:secondary_actor
		}
		scope:actor = {
			if = {
				limit = {
					scope:hook = yes
					has_hook = scope:recipient
				}
				use_hook = scope:recipient
			}
			add_courtier = scope:secondary_recipient
		}
    	}

	ai_frequency = 12
	ai_targets = {
		ai_recipients = vassals
		ai_recipients = liege
		ai_recipients = peer_vassals
		ai_recipients = neighboring_rulers
	}
	ai_accept = {
		base = 0
		modifier = {
			add = -100
			scope:recipient.gold < 50
		}
		opinion_modifier = {
			opinion_target = scope:actor
			who = scope:recipient
			multiplier = 1
		}
		opinion_modifier = {
			opinion_target = scope:secondary_actor
			who = scope:recipient
			multiplier = 1
		}
		opinion_modifier = {
			opinion_target = scope:secondary_recipient
			who = scope:recipient
			multiplier = -1
		}
	}
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 5
	}
}

deviants_buy_slut_interaction = {
	icon = deviantseconomy
	desc = deviants_buy_slut_interaction.desc
    	category = interaction_category_diplomacy
    	use_diplomatic_range = yes

    	is_shown = {
		NOT = { scope:actor = scope:recipient }
        	scope:actor = {
            		is_adult = yes
			OR = {
				is_landed = yes
				is_ruler = yes
			}
			has_trait = deviants_succubus
        	}
        	scope:recipient = {
            		is_adult = yes
			OR = {
				is_landed = yes
				is_ruler = yes
			}
			has_trait = deviants_succubus
			any_courtier = {
				OR = {
					has_character_modifier = deviants_prostitute
					has_character_modifier = deviants_public_toilet
				}
			}
        	}
    	}

	populate_actor_list = {
		scope:recipient = {
			every_courtier = {
				limit = {
					OR = {
						has_character_modifier = deviants_prostitute
						has_character_modifier = deviants_public_toilet
					}
				}
				add_to_list = characters
			}
		}
	}
	send_option = {
		is_valid = {
			scope:actor = {
				has_usable_hook = scope:recipient
			}
		}
		flag = hook	
		localization = GENERIC_SPEND_A_HOOK
	}
	send_options_exclusive = no
	auto_accept = {
		custom_description = {
			text = "spending_hook"
			subject = scope:actor
			object = scope:recipient
			scope:hook = yes
		}
	}	

    	on_accept = {
		scope:actor = {
			add_courtier = scope:secondary_actor
			pay_short_term_gold = {
				target = scope:recipient
				gold = 50
			}
			if = {
				limit = {
					scope:hook = yes
					has_hook = scope:recipient
				}
				use_hook = scope:recipient
			}
		}
    	}

	ai_frequency = 12
	ai_targets = {
		ai_recipients = vassals
		ai_recipients = liege
		ai_recipients = peer_vassals
		ai_recipients = neighboring_rulers
	}
	ai_accept = {
		base = 0
		opinion_modifier = {
			opinion_target = scope:actor
			who = scope:recipient
			multiplier = 1
		}
		opinion_modifier = {
			opinion_target = scope:secondary_actor
			who = scope:recipient
			multiplier = -1
		}
	}
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 5
	}
}

deviants_sell_slut_interaction = {
	icon = deviantseconomy
	desc = deviants_sell_slut_interaction.desc
    	category = interaction_category_diplomacy
    	use_diplomatic_range = yes

    	is_shown = {
		NOT = { scope:actor = scope:recipient }
        	scope:actor = {
            		is_adult = yes
			OR = {
				is_landed = yes
				is_ruler = yes
			}
			has_trait = deviants_succubus
			any_courtier = {
				OR = {
					has_character_modifier = deviants_prostitute
					has_character_modifier = deviants_public_toilet
				}
			}
        	}
        	scope:recipient = {
            		is_adult = yes
			OR = {
				is_landed = yes
				is_ruler = yes
			}
			has_trait = deviants_succubus
        	}
    	}

	populate_actor_list = {
		scope:actor = {
			every_courtier = {
				limit = {
					OR = {
						has_character_modifier = deviants_prostitute
						has_character_modifier = deviants_public_toilet
					}
				}
				add_to_list = characters
			}
		}
	}
	send_option = {
		is_valid = {
			scope:actor = {
				has_usable_hook = scope:recipient
			}
		}
		flag = hook	
		localization = GENERIC_SPEND_A_HOOK
	}
	send_options_exclusive = no
	auto_accept = {
		custom_description = {
			text = "spending_hook"
			subject = scope:actor
			object = scope:recipient
			scope:hook = yes
		}
	}	

    	on_accept = {
		scope:recipient = {
			add_courtier = scope:secondary_actor
			pay_short_term_gold = {
				target = scope:actor
				gold = 50
			}
		}
		scope:actor = {
			if = {
				limit = {
					scope:hook = yes
					has_hook = scope:recipient
				}
				use_hook = scope:recipient
			}
		}
    	}

	ai_frequency = 12
	ai_targets = {
		ai_recipients = vassals
		ai_recipients = liege
		ai_recipients = peer_vassals
		ai_recipients = neighboring_rulers
	}
	ai_accept = {
		base = 0
		modifier = {
			add = -100
			scope:recipient.gold < 50
		}
		opinion_modifier = {
			opinion_target = scope:actor
			who = scope:recipient
			multiplier = 1
		}
		opinion_modifier = {
			opinion_target = scope:secondary_actor
			who = scope:recipient
			multiplier = 1
		}
	}
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 5
	}
}

