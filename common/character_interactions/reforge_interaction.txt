open_reforge_menu = {
	common_interaction = yes
	auto_accept = yes
	use_diplomatic_range = no
	ignores_pending_interaction_block = yes
	
	is_shown = {
		scope:actor = {
			is_ai = no
			NOT = {
				has_character_flag = reforged_menu
			}
		}
	}
	
	on_send = {
		scope:actor = {
			add_character_flag = reforged_menu
		}
	}
}

close_reforge_menu = {
	common_interaction = yes
	auto_accept = yes
	use_diplomatic_range = no
	ignores_pending_interaction_block = yes
	
	is_shown = {
		scope:actor = {
			is_ai = no
			has_character_flag = reforged_menu
		}
	}
	
	on_send = {
		scope:actor = {
			remove_character_flag = reforged_menu
		}
	}
}


reforge_switch_character = {
	auto_accept = yes
	use_diplomatic_range = no
	ignores_pending_interaction_block = yes

	is_shown = {
		scope:actor = {
			is_ai = no
			has_character_flag = reforged_menu
		}
		scope:recipient = {
			is_ai = yes
		}
	}

	on_accept = {
		scope:recipient = {
			add_character_flag = reforged_menu
		}
		scope:actor = {
			remove_character_flag = reforged_menu
			set_player_character = scope:recipient
		}
	}
}

reforge_add_character = {
	auto_accept = yes
	use_diplomatic_range = no
	ignores_pending_interaction_block = yes
	
	is_shown = {
		NOT = { scope:recipient = scope:actor }
		scope:recipient = {
			is_landed = no
			NOT = {
				is_courtier_of = scope:actor
			}
		}
		scope:actor = {
			is_ai = no
			is_landed = yes
			has_character_flag = reforged_menu
		}
	}
	
	on_accept = {
		scope:actor = {
			add_courtier = scope:recipient
		}
	}
}

reforge_revoke_character = {
	use_diplomatic_range = no
	auto_accept = yes
	ignores_pending_interaction_block = yes
	special_interaction = revoke_title_interaction
	target_type = title
	target_filter = recipient_domain_titles
	
	is_shown = {
		NOT = { scope:actor = scope:recipient }
		scope:recipient = {
			is_landed = yes
		}
		scope:actor = {
			is_ai = no
			has_character_flag = reforged_menu
		}
	}
	
	is_valid_showing_failures_only = {
		scope:actor = { is_ai = no }
	}
	
	can_be_picked_title = {
		scope:target = {
			holder = scope:recipient
		}
	}
}

reforge_befriend_character = {
	auto_accept = yes
	use_diplomatic_range = no
	ignores_pending_interaction_block = yes

	is_shown = {
		NOT = { scope:recipient = scope:actor }
		scope:actor = {
			is_ai = no
			has_character_flag = reforged_menu
			NOT = { has_relation_friend = scope:recipient }
		}
	}

	on_accept = {
		scope:actor = {		
			set_relation_friend = scope:recipient
		}
	}
}

reforge_unfriend_character = {
	auto_accept = yes
	use_diplomatic_range = no
	ignores_pending_interaction_block = yes

	is_shown = {
		NOT = { scope:recipient = scope:actor }
		scope:actor = {
			is_ai = no
			has_character_flag = reforged_menu
			has_relation_friend = scope:recipient
		}
	}

	on_accept = {
		scope:actor = {		
			remove_relation_friend = scope:recipient
		}
	}
}
reforge_remove_rival = {
	common_interaction = no
	
	auto_accept = yes
	use_diplomatic_range = no
	ignores_pending_interaction_block = yes

	is_shown = {
		NOT = { scope:recipient = scope:actor }
		scope:actor = {
			is_ai = no
			has_relation_rival = scope:recipient
			has_character_flag = reforged_menu
		}
	}

	on_accept = {
		scope:actor = {
			remove_relation_rival = scope:recipient
		}
	}
}


reforge_create_hook = {
	common_interaction = no
	auto_accept = yes
	use_diplomatic_range = no
	ignores_pending_interaction_block = yes

	is_shown = {
		NOT = { scope:recipient = scope:actor }
		scope:actor = {
			has_character_flag = reforged_menu
			is_ai = no
		}
	}

	on_accept = {
		scope:actor = {
			add_hook = {
				target = scope:recipient
				type = favor_hook
			}
		}
	}
}

reforge_kill_character = {
	auto_accept = yes
	use_diplomatic_range = no
	ignores_pending_interaction_block = yes

	is_shown = {
		NOT = { scope:recipient = scope:actor }
		scope:actor = {
			is_ai = no
			has_character_flag = reforged_menu
		}
	}

	on_accept = {
		scope:recipient = {
			death = { death_reason = death_natural_causes }
		}
	}
}

reforge_imprison = {
	auto_accept = yes
	use_diplomatic_range = no
	ignores_pending_interaction_block = yes

	is_shown = {
		NOT = { scope:recipient = scope:actor }
		scope:actor = {
			is_ai = no
			has_character_flag = reforged_menu
		}
	}

	on_accept = {
		scope:actor = {
			imprison = {
				target = scope:recipient
				type = dungeon
			}
		}
	}
}

reforge_offer_vassal = {
	auto_accept = yes
	use_diplomatic_range = no
	ignores_pending_interaction_block = yes
	
	is_shown = {
		scope:recipient = {
			NOT = { this = scope:actor }
			is_landed = yes
			highest_held_title_tier < scope:actor.highest_held_title_tier
			NOT = { government_has_flag = can_not_be_vassal_or_liege }
		}
		scope:actor = {
			is_ai = no
			has_character_flag = reforged_menu
		}
	}

	on_accept = {
		offer_vassalization_interaction_effect = yes
	}
}

reforge_change_weight = {
	auto_accept = yes
	use_diplomatic_range = no
	ignores_pending_interaction_block = yes
	
	is_shown = {
		scope:actor = {
			has_character_flag = reforged_menu
			is_ai = no
		}
	}
	
	on_send = {
		scope:recipient = {
			save_scope_as = currency_scope
		}
		scope:actor = {
			trigger_event = char_interactions.1
		}
	}
}

reforge_become_slut = {
	auto_accept = yes
	use_diplomatic_range = no
	ignores_pending_interaction_block = yes

	is_shown = {
		NOT = { scope:recipient = { age < 16 } }
		scope:actor = {
			has_character_flag = reforged_menu
			is_ai = no
		}
		scope:recipient = {
			is_adult = yes
			is_female = yes
			NOT = {
				has_character_modifier = reforge_slut
			}
		}
	}

	on_accept = {
		scope:recipient = {
			random_list = {
				50 = {
					give_nickname = nick_the_lewd
				}
				50 = {
					give_nickname = nick_the_lecher
				}
			}
			add_character_modifier = reforge_slut
			add_character_flag = immune_to_disease

		}
	}
}

reforge_revoke_slut = {
	auto_accept = yes
	use_diplomatic_range = no
	ignores_pending_interaction_block = yes

	is_shown = {
		scope:actor = {
			has_character_flag = reforged_menu
			is_ai = no
		}
		scope:recipient = {
			has_character_modifier = reforge_slut
		}
	}

	on_accept = {
		scope:recipient = {
			remove_character_modifier = reforge_slut
			remove_character_flag = immune_to_disease
		}
	}
}

reforge_nude = {
	auto_accept = yes
	use_diplomatic_range = no
	ignores_pending_interaction_block = yes

	is_shown = {
		scope:actor = {
			has_character_flag = reforged_menu
			is_ai = no
		}
		scope:recipient = {
			is_adult = yes
			is_female = yes
			NOT = {
				has_character_modifier = diplomacy_majesty_4090_no_raiment_modifier 
			}
		}
	}

	on_accept = {
		scope:recipient = {
			add_character_modifier = diplomacy_majesty_4090_no_raiment_modifier
		}
	}
}

reforge_stop_nude = {
	auto_accept = yes
	use_diplomatic_range = no
	ignores_pending_interaction_block = yes

	is_shown = {
		scope:actor = {
			has_character_flag = reforged_menu
			is_ai = no
		}
		scope:recipient = {
			has_character_modifier = diplomacy_majesty_4090_no_raiment_modifier 
		}
	}

	on_accept = {
		scope:recipient = {
			remove_character_modifier = diplomacy_majesty_4090_no_raiment_modifier
			remove_character_flag = mrf_is_naked
		}
	}
}

reforge_evil = {
	auto_accept = yes
	use_diplomatic_range = no
	ignores_pending_interaction_block = yes

	is_shown = {
		scope:actor = {
			has_character_flag = reforged_menu
			is_ai = no
		}
		scope:recipient = {
			NOT = {
				any_secret = { secret_type = secret_deviant }
				any_secret = { secret_type = secret_witch }
				any_secret = { secret_type = secret_cannibal }
			}
		}
	}

	on_accept = {
		scope:recipient = {
			hidden_effect = {
				add_secret = { 
					type = secret_deviant
				}
				add_secret = { 
					type = secret_witch
				}
				add_secret = { 
					type = secret_cannibal
				}
			}
		}
	}
}
