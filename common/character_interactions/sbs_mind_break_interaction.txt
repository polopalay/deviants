sbs_mind_break_interaction = {
	icon = mesmerize
	desc = sbs_mind_break_interaction.desc
	category = interaction_category_hostile
	use_diplomatic_range = yes
	cooldown = { years = 2 }
	common_interaction = yes
	is_shown = {
		NOT = { scope:recipient = scope:actor }
		scope:actor = {
			OR = {
				has_trait = sbs_demon
				has_trait = sbs_succubus
			}
		}
		scope:recipient = {
			NOT = {
				has_trait = seed_of_destruction
				has_trait = sbs_lesser_succubus
				has_trait = sbs_succubus
				has_trait = sbs_demon
			}
		}
	}
	is_valid = {
		scope:actor = {
			OR = {
				has_trait = sbs_demon
				has_trait_xp = { trait = sbs_succubus track = daring value >= 25 }
			}
		}
	}

	send_option = {
		is_shown = {
			scope:recipient = { is_adult = yes }
		}
		is_valid = {
			scope:recipient = { NOT = { has_trait = lifestyle_prostitute has_character_modifier = carn_working_as_prostitute_1_modifier } }
		}
		flag = prostitution
		localization = "carn_force_start_prostitution_interaction"
	}
	send_option = {
		is_valid = {
			scope:recipient = {
				NOT = {
					has_trait = witch
					any_secret = { secret_type = secret_witch }
				}
			}
		}
		flag = witch
		localization = "trait_witch"
	}
	send_option = {
		is_shown = {
			scope:recipient = { is_adult = yes }
		}
		is_valid = {
			scope:recipient = {
				NOT = {
					has_trait = deviant
					any_secret = { secret_type = secret_deviant }
				}
			}
		}
		flag = deviant
		localization = "trait_deviant"
	}
	send_option = {
		is_shown = {
			scope:recipient = { is_female = yes is_adult = yes }
		}
		is_valid = {
			scope:recipient = { NOT = { has_trait = lustful } }
		}
		flag = mind_break_personality
		localization = "sbs_mind_break_interaction"
	}
	send_option = {
		is_shown = {
			scope:recipient = { is_female = no }
		}
		is_valid = {
			scope:recipient = { NOT = { has_trait = seed_of_destruction } }
		}
		flag = seed_of_destruction
		localization = "sbs_mind_break_interaction"
	}
	send_options_exclusive = no
	on_accept = {
		scope:actor = {
			if = {
				limit = { has_trait = sbs_succubus }
				add_trait_xp = { trait = sbs_succubus track = daring value = -25 }
			}
		}
		if = {
			limit = { scope:witch = yes }
			scope:recipient = {
				add_secret = { type = secret_witch }
			}
			scope:actor = {
				limit = {
					has_trait = sbs_succubus
				}
				add_trait_xp = { trait = sbs_succubus track = loyalty value = 1 }
			}
		}
		if = {
			limit = { scope:deviant = yes }
			scope:recipient = {
				add_secret = { type = secret_deviant }
			}
			scope:actor = {
				limit = {
					has_trait = sbs_succubus
				}
				add_trait_xp = { trait = sbs_succubus track = corruption value = 1 }
			}
		}
		scope:recipient = {
			if = {
				limit = { scope:prostitution = yes }
				add_trait = lifestyle_prostitute
				add_character_modifier = carn_working_as_prostitute_1_modifier
				every_courtier_or_guest = {
					limit = { is_adult = yes is_attracted_to_gender_of = scope:recipient }
					had_sex_with_effect = {
						CHARACTER = scope:recipient
						PREGNANCY_CHANCE = pregnancy_chance
					}
					pay_short_term_gold = { target = scope:actor gold = scope:recipient.prostitute_price_value }
				}
				every_vassal_or_below = {
					limit = { is_adult = yes is_attracted_to_gender_of = scope:recipient }
					had_sex_with_effect = {
						CHARACTER = scope:recipient
						PREGNANCY_CHANCE = pregnancy_chance
					}
					pay_short_term_gold = { target = scope:actor gold = scope:recipient.prostitute_price_value }
				}
			}
			if = {
				limit = { scope:mind_break_personality = yes }
				mind_break_personality = yes
				if = {
					limit = {
						NOR = {
							has_trait = slave
							has_character_flag = carn_cannot_be_enslaved
							has_trait_with_flag = carn_cannot_be_enslaved
						}
					}
					add_opinion = { target = scope:actor modifier = carn_wants_to_be_your_slave_opinion }
				}
			}
			if = {
				limit = { scope:seed_of_destruction = yes }
				random_list = {
					10 = {
						modifier = { has_trait = deviant_blood add = 40 }
						modifier = { has_character_modifier = succubus_debuff add = 10 }
						remove_opinion = { target = scope:actor modifier = carn_wants_to_be_your_slave_opinion }
						remove_character_modifier = succubus_debuff
						remove_trait = deviant_blood
						set_immortal_age = 18
						add_trait = seed_of_destruction
					}
					10 = {
						modifier = { has_trait = deviant_blood add = 40 }
						add_character_modifier = succubus_debuff
					}
					5 = { add_trait = depressed_1 }
					5 = { add_trait = depressed_genetic }
					5 = { add_trait = lunatic_1 }
					5 = { add_trait = lunatic_genetic }
					5 = { add_trait = possessed_1 }
					5 = { add_trait = possessed_genetic }
					5 = { add_trait = ill }
					5 = { add_trait = pneumonic }
					5 = { add_trait = gout_ridden }
					5 = { add_trait = typhus }
					5 = { add_trait = consumption }
					5 = { add_trait = cancer }
					5 = { add_trait = great_pox }
					5 = { add_trait = smallpox }
					5 = { add_trait = bubonic_plague }
					5 = { add_trait = lovers_pox }
					5 = { add_trait = great_pox }
					5 = { add_trait = bubonic_plague }
					5 = { add_trait = measles }
					5 = { add_trait = dysentery }
					5 = { add_trait = ergotism }
					5 = { add_trait = dull }
					5 = { add_trait = weak }
					5 = { add_trait = inbred }
				}
			}
			add_character_modifier = { modifier = succubus_buff years = 10 }
		}
	}
	ai_accept = {
		base = 10
		opinion_modifier = {
			opinion_target = scope:actor
			who = scope:recipient
			multiplier = 0.1
		}
		modifier = { add = -2 scope:mind_break_personality = yes scope:recipient = { ai_zeal > high_positive_ai_value faith = { trait_is_sin = lustful } } }
		modifier = { add = -5 scope:mind_break_personality = yes scope:recipient = { ai_zeal > very_high_positive_ai_value faith = { trait_is_sin = lustful } } }
		modifier = { add = -10 scope:mind_break_personality = yes scope:recipient = { ai_zeal > dominant_positive_ai_value faith = { trait_is_sin = lustful } } }
		modifier = { add = -2 scope:witch = yes scope:recipient = { ai_zeal > high_positive_ai_value faith = { NOR = { has_doctrine = doctrine_witchcraft_accepted has_doctrine = doctrine_witchcraft_virtuous  } } } }
		modifier = { add = -5 scope:witch = yes scope:recipient = { ai_zeal > very_high_positive_ai_value faith = { NOR = { has_doctrine = doctrine_witchcraft_accepted has_doctrine = doctrine_witchcraft_virtuous } } } }
		modifier = { add = -10 scope:witch = yes scope:recipient = { ai_zeal > dominant_positive_ai_value faith = { NOR = { has_doctrine = doctrine_witchcraft_accepted has_doctrine = doctrine_witchcraft_virtuous } } } }
		modifier = { add = -2 scope:deviant = yes scope:recipient = { ai_zeal > high_positive_ai_value faith = { NOR = { has_doctrine = doctrine_deviancy_accepted has_doctrine = doctrine_deviancy_virtuous  } } } }
		modifier = { add = -5 scope:deviant = yes scope:recipient = { ai_zeal > very_high_positive_ai_value faith = { NOR = { has_doctrine = doctrine_deviancy_accepted has_doctrine = doctrine_deviancy_virtuous } } } }
		modifier = { add = -10 scope:deviant = yes scope:recipient = { ai_zeal > dominant_positive_ai_value faith = { NOR = { has_doctrine = doctrine_deviancy_accepted has_doctrine = doctrine_deviancy_virtuous } } } }
		modifier = { add = -5 scope:prostitution = yes scope:recipient = { ai_zeal > high_positive_ai_value faith = { NOR = { has_doctrine = doctrine_adultery_men_accepted has_doctrine = doctrine_adultery_women_accepted  } } } }
		modifier = { add = -8 scope:prostitution = yes scope:recipient = { ai_zeal > very_high_positive_ai_value faith = { NOR = { has_doctrine = doctrine_adultery_men_accepted has_doctrine = doctrine_adultery_women_accepted  } } } }
		modifier = { add = -12 scope:prostitution = yes scope:recipient = { ai_zeal > dominant_positive_ai_value faith = { NOR = { has_doctrine = doctrine_adultery_men_accepted has_doctrine = doctrine_adultery_women_accepted  } } } }
	}
	ai_frequency = 12
	ai_targets = {
		ai_recipients = family
		ai_recipients = liege
		ai_recipients = vassals
		ai_recipients = prisoners
		ai_recipients = courtiers
		ai_recipients = scripted_relations
		ai_recipients = neighboring_rulers
		max = 5
	}
	ai_potential = { always = yes }
	ai_will_do = {
		base = 0
		modifier = { add = 5 scope:recipient = { is_vassal_of = scope:actor } scope:mind_break_personality = yes }
		modifier = { add = 5 scope:recipient = { is_courtier_of = scope:actor } scope:mind_break_personality = yes scope:prostitution = yes }
		modifier = { add = 5 scope:actor.liege = scope:recipient OR = { scope:witch = yes scope:deviant = yes scope:prostitution = yes } }
		modifier = { add = 100 scope:recipient = { is_child_of = scope:actor } OR = { scope:seed_of_destruction = yes scope:mind_break_personality = yes } }
		modifier = { add = 100 scope:recipient = { is_ai = no } OR = { scope:seed_of_destruction = yes scope:mind_break_personality = yes scope:witch = yes scope:deviant = yes } }
	}
}
